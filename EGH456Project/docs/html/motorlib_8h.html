<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EGH456 Assignment 2: lib/motorlib/motorlib.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">EGH456 Assignment 2
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('motorlib_8h.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">motorlib.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for motorlib.h:</div>
<div class="dyncontent">
<div class="center"><img src="motorlib_8h__incl.png" border="0" usemap="#alib_2motorlib_2motorlib_8h" alt=""/></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="motorlib_8h__dep__incl.png" border="0" usemap="#alib_2motorlib_2motorlib_8hdep" alt=""/></div>
</div>
</div>
<p><a href="motorlib_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2787833597cc85b70a8dea4657ccfa12" id="r_a2787833597cc85b70a8dea4657ccfa12"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2787833597cc85b70a8dea4657ccfa12">setDuty</a> (uint16_t duty)</td></tr>
<tr class="memdesc:a2787833597cc85b70a8dea4657ccfa12"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets the duty cycle of the high side PWM lines.  <br /></td></tr>
<tr class="separator:a2787833597cc85b70a8dea4657ccfa12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5a0079ae18efa088e80cd6a63333233" id="r_af5a0079ae18efa088e80cd6a63333233"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af5a0079ae18efa088e80cd6a63333233">updateMotor</a> (bool Hall_a, bool Hall_b, bool Hall_c)</td></tr>
<tr class="memdesc:af5a0079ae18efa088e80cd6a63333233"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function which Commutates the motor phases A,B,C to the correct values based on the Hall sensor input.  <br /></td></tr>
<tr class="separator:af5a0079ae18efa088e80cd6a63333233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ff01097c11fe747f32c062c82d1414f" id="r_a0ff01097c11fe747f32c062c82d1414f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0ff01097c11fe747f32c062c82d1414f">stopMotor</a> (bool brakeType)</td></tr>
<tr class="memdesc:a0ff01097c11fe747f32c062c82d1414f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Brakes motor by turning all phases high or low.  <br /></td></tr>
<tr class="separator:a0ff01097c11fe747f32c062c82d1414f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c5f85964505556f9cbcf76028a8905" id="r_ad4c5f85964505556f9cbcf76028a8905"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad4c5f85964505556f9cbcf76028a8905">enableMotor</a> ()</td></tr>
<tr class="memdesc:ad4c5f85964505556f9cbcf76028a8905"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables Motor Drive by setting enable pin to low.  <br /></td></tr>
<tr class="separator:ad4c5f85964505556f9cbcf76028a8905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a608e34faaf95e412e482c0c48f0c3958" id="r_a608e34faaf95e412e482c0c48f0c3958"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a608e34faaf95e412e482c0c48f0c3958">disableMotor</a> ()</td></tr>
<tr class="memdesc:a608e34faaf95e412e482c0c48f0c3958"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables Motor Drive by setting enable pin to High.  <br /></td></tr>
<tr class="separator:a608e34faaf95e412e482c0c48f0c3958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74c4151f97d669bd0767f3a90d38fb32" id="r_a74c4151f97d669bd0767f3a90d38fb32"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a74c4151f97d669bd0767f3a90d38fb32">initMotorLib</a> (uint16_t pwm_period)</td></tr>
<tr class="memdesc:a74c4151f97d669bd0767f3a90d38fb32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise GPIO and PWM module to ensure correct setup of High/Low side pins.  <br /></td></tr>
<tr class="separator:a74c4151f97d669bd0767f3a90d38fb32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eb1d816098c55c6cc05158d9d8b5ed4" id="r_a2eb1d816098c55c6cc05158d9d8b5ed4"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2eb1d816098c55c6cc05158d9d8b5ed4">getMotorPWMPeriod</a> ()</td></tr>
<tr class="memdesc:a2eb1d816098c55c6cc05158d9d8b5ed4"><td class="mdescLeft">&#160;</td><td class="mdescRight">getter function for internal PWM period.  <br /></td></tr>
<tr class="separator:a2eb1d816098c55c6cc05158d9d8b5ed4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a608e34faaf95e412e482c0c48f0c3958" name="a608e34faaf95e412e482c0c48f0c3958"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a608e34faaf95e412e482c0c48f0c3958">&#9670;&#160;</a></span>disableMotor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void disableMotor </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables Motor Drive by setting enable pin to High. </p>
<ul>
<li></li>
</ul>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="motorlib_8h_a608e34faaf95e412e482c0c48f0c3958_icgraph.png" border="0" usemap="#amotorlib_8h_a608e34faaf95e412e482c0c48f0c3958_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="ad4c5f85964505556f9cbcf76028a8905" name="ad4c5f85964505556f9cbcf76028a8905"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4c5f85964505556f9cbcf76028a8905">&#9670;&#160;</a></span>enableMotor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enableMotor </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables Motor Drive by setting enable pin to low. </p>
<ul>
<li></li>
</ul>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="motorlib_8h_ad4c5f85964505556f9cbcf76028a8905_icgraph.png" border="0" usemap="#amotorlib_8h_ad4c5f85964505556f9cbcf76028a8905_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a2eb1d816098c55c6cc05158d9d8b5ed4" name="a2eb1d816098c55c6cc05158d9d8b5ed4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eb1d816098c55c6cc05158d9d8b5ed4">&#9670;&#160;</a></span>getMotorPWMPeriod()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t getMotorPWMPeriod </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>getter function for internal PWM period. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pwm_period</td><td>recommended value is 24, relates to pwm frequency and determines resolution of duty cycle value see PWM device information to understand how pwm period limits range of duty cycle max duty becomes pwm_period value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool if initialisation was successful, error_block can be used to determine further issues on what caused a failure to setup the motor.</dd></dl>
<ul>
<li></li>
</ul>

</div>
</div>
<a id="a74c4151f97d669bd0767f3a90d38fb32" name="a74c4151f97d669bd0767f3a90d38fb32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74c4151f97d669bd0767f3a90d38fb32">&#9670;&#160;</a></span>initMotorLib()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool initMotorLib </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>pwm_period</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise GPIO and PWM module to ensure correct setup of High/Low side pins. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pwm_duty_period</td><td>16 bit unsigned integer pwm period is in microseconds and should be set to be a value between 10 - 100 (100KHz - 10Khz)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the PWM modules initialised successfully. False if an error occurred likely due to already being opened elsewhere</dd></dl>
<ul>
<li></li>
</ul>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="motorlib_8h_a74c4151f97d669bd0767f3a90d38fb32_icgraph.png" border="0" usemap="#amotorlib_8h_a74c4151f97d669bd0767f3a90d38fb32_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a2787833597cc85b70a8dea4657ccfa12" name="a2787833597cc85b70a8dea4657ccfa12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2787833597cc85b70a8dea4657ccfa12">&#9670;&#160;</a></span>setDuty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setDuty </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>duty</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets the duty cycle of the high side PWM lines. </p>
<dl class="section pre"><dt>Precondition</dt><dd>motor library has been initialized using <a class="el" href="#a74c4151f97d669bd0767f3a90d38fb32" title="Initialise GPIO and PWM module to ensure correct setup of High/Low side pins.">initMotorLib()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">duty</td><td>16bit integer number for the setting the duty cycle in microseconds where the max integer = PWM Period set prior in the <a class="el" href="#a74c4151f97d669bd0767f3a90d38fb32" title="Initialise GPIO and PWM module to ensure correct setup of High/Low side pins.">initMotorLib()</a> function Valid values for duty are 0 - PWMStruct.MaxDuty </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="motorlib_8h_a2787833597cc85b70a8dea4657ccfa12_icgraph.png" border="0" usemap="#amotorlib_8h_a2787833597cc85b70a8dea4657ccfa12_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a0ff01097c11fe747f32c062c82d1414f" name="a0ff01097c11fe747f32c062c82d1414f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ff01097c11fe747f32c062c82d1414f">&#9670;&#160;</a></span>stopMotor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stopMotor </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>brakeType</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Brakes motor by turning all phases high or low. </p>
<dl class="section pre"><dt>Precondition</dt><dd>motor library has been initialized using <a class="el" href="#a74c4151f97d669bd0767f3a90d38fb32" title="Initialise GPIO and PWM module to ensure correct setup of High/Low side pins.">initMotorLib()</a> and duty cycle as been set</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">brakeType</td><td>Determines hard or soft brake. If true then all phases set to high, else all phases set to low</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li></li>
</ul>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="motorlib_8h_a0ff01097c11fe747f32c062c82d1414f_icgraph.png" border="0" usemap="#amotorlib_8h_a0ff01097c11fe747f32c062c82d1414f_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="af5a0079ae18efa088e80cd6a63333233" name="af5a0079ae18efa088e80cd6a63333233"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5a0079ae18efa088e80cd6a63333233">&#9670;&#160;</a></span>updateMotor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateMotor </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>Hall_a</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>Hall_b</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>Hall_c</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function which Commutates the motor phases A,B,C to the correct values based on the Hall sensor input. </p>
<dl class="section pre"><dt>Precondition</dt><dd>motor library has been initialized using <a class="el" href="#a74c4151f97d669bd0767f3a90d38fb32" title="Initialise GPIO and PWM module to ensure correct setup of High/Low side pins.">initMotorLib()</a> and duty cycle as been set</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Hall_a</td><td>current value of the Hall A effect sensor as a bool (0 or 1)</td></tr>
    <tr><td class="paramname">Hall_b</td><td>current value of the Hall B effect sensor as a bool (0 or 1)</td></tr>
    <tr><td class="paramname">Hall_c</td><td>current value of the Hall C effect sensor as a bool (0 or 1)<ul>
<li></li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="motorlib_8h_af5a0079ae18efa088e80cd6a63333233_icgraph.png" border="0" usemap="#amotorlib_8h_af5a0079ae18efa088e80cd6a63333233_icgraph" alt=""/></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_45daf64ac534bda8eae9ff7c9928e992.html">motorlib</a></li><li class="navelem"><a class="el" href="motorlib_8h.html">motorlib.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
