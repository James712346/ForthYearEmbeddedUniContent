<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EGH456 Assignment 2: src/motors.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">EGH456 Assignment 2
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('motors_8c.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">motors.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;shared.h&gt;</code><br />
<code>#include &lt;FreeRTOS.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;portmacro.h&gt;</code><br />
<code>#include &lt;projdefs.h&gt;</code><br />
<code>#include &lt;semphr.h&gt;</code><br />
<code>#include &lt;task.h&gt;</code><br />
<code>#include &quot;driverlib/adc.h&quot;</code><br />
<code>#include &quot;driverlib/interrupt.h&quot;</code><br />
<code>#include &quot;driverlib/sysctl.h&quot;</code><br />
<code>#include &quot;driverlib/systick.h&quot;</code><br />
<code>#include &quot;driverlib/timer.h&quot;</code><br />
<code>#include &quot;sensor_task.h&quot;</code><br />
<code>#include &quot;<a class="el" href="uartstdio_8h_source.html">utils/uartstdio.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="adc_8h_source.html">adc.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="gpio_8h_source.html">gpio.h</a>&gt;</code><br />
<code>#include &lt;inc/hw_ints.h&gt;</code><br />
<code>#include &lt;inc/hw_memmap.h&gt;</code><br />
<code>#include &lt;<a class="el" href="interrupt_8h_source.html">interrupt.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="motorlib_8h_source.html">motorlib.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="rom__map_8h_source.html">rom_map.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="rtos__hw__drivers_8h_source.html">rtos_hw_drivers.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sysctl_8h_source.html">sysctl.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="timer_8h_source.html">timer.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for motors.c:</div>
<div class="dyncontent">
<div class="center"><img src="motors_8c__incl.png" border="0" usemap="#asrc_2motors_8c" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structadcSample.html">adcSample</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga176b6c843e5a734ec409cc347821bbeb" id="r_ga176b6c843e5a734ec409cc347821bbeb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga176b6c843e5a734ec409cc347821bbeb">setBitTo</a>(n,  b,  v)</td></tr>
<tr class="memdesc:ga176b6c843e5a734ec409cc347821bbeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility macro to set specific bit in a number.  <br /></td></tr>
<tr class="separator:ga176b6c843e5a734ec409cc347821bbeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76b2b7d3f9f2c0f931fbbb854c96986e" id="r_ga76b2b7d3f9f2c0f931fbbb854c96986e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga76b2b7d3f9f2c0f931fbbb854c96986e">TICKS_TO_MS</a>(ticks)</td></tr>
<tr class="memdesc:ga76b2b7d3f9f2c0f931fbbb854c96986e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert FreeRTOS ticks to milliseconds.  <br /></td></tr>
<tr class="separator:ga76b2b7d3f9f2c0f931fbbb854c96986e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab456f738bec038962389b5c5cfca3de4" id="r_gab456f738bec038962389b5c5cfca3de4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gab456f738bec038962389b5c5cfca3de4">MAXBUFFER</a>&#160;&#160;&#160;40</td></tr>
<tr class="separator:gab456f738bec038962389b5c5cfca3de4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga99a14d1fc263b159cb634778c7a14b36" id="r_ga99a14d1fc263b159cb634778c7a14b36"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga99a14d1fc263b159cb634778c7a14b36">MAXRPM</a>&#160;&#160;&#160;3250</td></tr>
<tr class="memdesc:ga99a14d1fc263b159cb634778c7a14b36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum RPM rating of the motor.  <br /></td></tr>
<tr class="separator:ga99a14d1fc263b159cb634778c7a14b36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf281425e62298bac2df0fbe8690a4844" id="r_gaf281425e62298bac2df0fbe8690a4844"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gaf281425e62298bac2df0fbe8690a4844">PERIOD</a>&#160;&#160;&#160;100</td></tr>
<tr class="memdesc:gaf281425e62298bac2df0fbe8690a4844"><td class="mdescLeft">&#160;</td><td class="mdescRight">PWM period setting (10-100 range)  <br /></td></tr>
<tr class="separator:gaf281425e62298bac2df0fbe8690a4844"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf30c012c92bdd66716137298e1f7e198" id="r_gaf30c012c92bdd66716137298e1f7e198"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gaf30c012c92bdd66716137298e1f7e198">setupTimers</a> ()</td></tr>
<tr class="memdesc:gaf30c012c92bdd66716137298e1f7e198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure Timer1 for RPM ramping control.  <br /></td></tr>
<tr class="separator:gaf30c012c92bdd66716137298e1f7e198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafcf62509553f63c5a7bf44e7d61c960b" id="r_gafcf62509553f63c5a7bf44e7d61c960b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gafcf62509553f63c5a7bf44e7d61c960b">xGPIOHandlerH</a> (void)</td></tr>
<tr class="memdesc:gafcf62509553f63c5a7bf44e7d61c960b"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO Port H Interrupt Handler.  <br /></td></tr>
<tr class="separator:gafcf62509553f63c5a7bf44e7d61c960b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab522aa5b63f839693f4c5f1da54dde72" id="r_gab522aa5b63f839693f4c5f1da54dde72"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gab522aa5b63f839693f4c5f1da54dde72">xGPIOHandlerN</a> (void)</td></tr>
<tr class="memdesc:gab522aa5b63f839693f4c5f1da54dde72"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO Port N Interrupt Handler.  <br /></td></tr>
<tr class="separator:gab522aa5b63f839693f4c5f1da54dde72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf3d16f19c3510a10f87fc0bcf1e57918" id="r_gaf3d16f19c3510a10f87fc0bcf1e57918"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gaf3d16f19c3510a10f87fc0bcf1e57918">xGPIOHandlerM</a> (void)</td></tr>
<tr class="memdesc:gaf3d16f19c3510a10f87fc0bcf1e57918"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO Port M Interrupt Handler.  <br /></td></tr>
<tr class="separator:gaf3d16f19c3510a10f87fc0bcf1e57918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa870854414570364019b53db97f40f86" id="r_gaa870854414570364019b53db97f40f86"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gaa870854414570364019b53db97f40f86">xTimer1AHandler</a> (void)</td></tr>
<tr class="memdesc:gaa870854414570364019b53db97f40f86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer 1A interrupt handler for RPM ramping.  <br /></td></tr>
<tr class="separator:gaa870854414570364019b53db97f40f86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45bc1614b4a08f093abf9970405eff4f" id="r_ga45bc1614b4a08f093abf9970405eff4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga45bc1614b4a08f093abf9970405eff4f">xADC1Sequence0</a> (void)</td></tr>
<tr class="memdesc:ga45bc1614b4a08f093abf9970405eff4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">ADC1 Sequence 0 Interrupt Handler.  <br /></td></tr>
<tr class="separator:ga45bc1614b4a08f093abf9970405eff4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17acdc6905b68b45c67aa61fe958f688" id="r_ga17acdc6905b68b45c67aa61fe958f688"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga17acdc6905b68b45c67aa61fe958f688">CreateMotorTask</a> (void)</td></tr>
<tr class="memdesc:ga17acdc6905b68b45c67aa61fe958f688"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create Motor Control Tasks.  <br /></td></tr>
<tr class="separator:ga17acdc6905b68b45c67aa61fe958f688"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga988a20ffdf02ddb5e1df3a83828494aa" id="r_ga988a20ffdf02ddb5e1df3a83828494aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga988a20ffdf02ddb5e1df3a83828494aa">hallEffectDecode</a> ()</td></tr>
<tr class="memdesc:ga988a20ffdf02ddb5e1df3a83828494aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode Hall effect sensor state and update motor commutation.  <br /></td></tr>
<tr class="separator:ga988a20ffdf02ddb5e1df3a83828494aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d6f239da630b7b16b0e02a4aaa664f1" id="r_ga8d6f239da630b7b16b0e02a4aaa664f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga8d6f239da630b7b16b0e02a4aaa664f1">checkMotor</a> ()</td></tr>
<tr class="memdesc:ga8d6f239da630b7b16b0e02a4aaa664f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Poll Hall effect sensors and update motor (fallback method)  <br /></td></tr>
<tr class="separator:ga8d6f239da630b7b16b0e02a4aaa664f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab86eb19b25275b3725f3c542ed3b79f7" id="r_gab86eb19b25275b3725f3c542ed3b79f7"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gab86eb19b25275b3725f3c542ed3b79f7">eStopGetter</a> (TickType_t blockingTime)</td></tr>
<tr class="separator:gab86eb19b25275b3725f3c542ed3b79f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf3c9525e67cb6a1d2b2957248226c7aa" id="r_gaf3c9525e67cb6a1d2b2957248226c7aa"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gaf3c9525e67cb6a1d2b2957248226c7aa">eStopSetter</a> (bool set, TickType_t blockingTime)</td></tr>
<tr class="separator:gaf3c9525e67cb6a1d2b2957248226c7aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga116fdd93b02eab3cdc08b91546ea4048" id="r_ga116fdd93b02eab3cdc08b91546ea4048"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga116fdd93b02eab3cdc08b91546ea4048">RPMCalculate</a> (TickType_t dt)</td></tr>
<tr class="memdesc:ga116fdd93b02eab3cdc08b91546ea4048"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate motor RPM from Hall effect transitions.  <br /></td></tr>
<tr class="separator:ga116fdd93b02eab3cdc08b91546ea4048"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad17f8340ab0c3389c430455844624503" id="r_gad17f8340ab0c3389c430455844624503"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gad17f8340ab0c3389c430455844624503">PIDController</a> (double RPM, double dt)</td></tr>
<tr class="memdesc:gad17f8340ab0c3389c430455844624503"><td class="mdescLeft">&#160;</td><td class="mdescRight">PID speed controller for motor.  <br /></td></tr>
<tr class="separator:gad17f8340ab0c3389c430455844624503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ade69d0b0ae4566e4a7217d99490f04" id="r_ga3ade69d0b0ae4566e4a7217d99490f04"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga3ade69d0b0ae4566e4a7217d99490f04">readCurrent</a> (uint16_t adc_value)</td></tr>
<tr class="memdesc:ga3ade69d0b0ae4566e4a7217d99490f04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read Current from ADC Value.  <br /></td></tr>
<tr class="separator:ga3ade69d0b0ae4566e4a7217d99490f04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab5bace85b2480456bf970fe52a9f7643" id="r_gab5bace85b2480456bf970fe52a9f7643"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gab5bace85b2480456bf970fe52a9f7643">estimatePower</a> (double voltage, double current_a, double current_b)</td></tr>
<tr class="memdesc:gab5bace85b2480456bf970fe52a9f7643"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate Total Motor Power.  <br /></td></tr>
<tr class="separator:gab5bace85b2480456bf970fe52a9f7643"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gacb2b0bb917b622ffe964e56d075f2d60" id="r_gacb2b0bb917b622ffe964e56d075f2d60"><td class="memItemLeft" align="right" valign="top">volatile uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gacb2b0bb917b622ffe964e56d075f2d60">g_ui32SysClock</a></td></tr>
<tr class="separator:gacb2b0bb917b622ffe964e56d075f2d60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga789a93ef20a4eb18ffc2fbf321137fd3" id="r_ga789a93ef20a4eb18ffc2fbf321137fd3"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="structadcSample.html">adcSample</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga789a93ef20a4eb18ffc2fbf321137fd3">adcBuffer</a> [<a class="el" href="group__motor.html#gab456f738bec038962389b5c5cfca3de4">MAXBUFFER</a>]</td></tr>
<tr class="separator:ga789a93ef20a4eb18ffc2fbf321137fd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89b7affab316adf9f2aa29499fae73f4" id="r_ga89b7affab316adf9f2aa29499fae73f4"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga89b7affab316adf9f2aa29499fae73f4">adcHead</a> = 0</td></tr>
<tr class="separator:ga89b7affab316adf9f2aa29499fae73f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf40291b36f16081889e40c717360bad5" id="r_gaf40291b36f16081889e40c717360bad5"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gaf40291b36f16081889e40c717360bad5">adcTail</a> = 0</td></tr>
<tr class="separator:gaf40291b36f16081889e40c717360bad5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac6dd8cf133db4505d84f2144ea261181" id="r_gac6dd8cf133db4505d84f2144ea261181"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gac6dd8cf133db4505d84f2144ea261181">Kp</a> = 0.032</td></tr>
<tr class="memdesc:gac6dd8cf133db4505d84f2144ea261181"><td class="mdescLeft">&#160;</td><td class="mdescRight">PID Proportional gain constant for speed control.  <br /></td></tr>
<tr class="separator:gac6dd8cf133db4505d84f2144ea261181"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe6fd874b1259cef0710b2c9d23bc087" id="r_gafe6fd874b1259cef0710b2c9d23bc087"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gafe6fd874b1259cef0710b2c9d23bc087">Ki</a> = 0.075</td></tr>
<tr class="memdesc:gafe6fd874b1259cef0710b2c9d23bc087"><td class="mdescLeft">&#160;</td><td class="mdescRight">PID Integral gain constant for speed control.  <br /></td></tr>
<tr class="separator:gafe6fd874b1259cef0710b2c9d23bc087"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac650d3f965d8f8ed28a7f45b96d4ebdd" id="r_gac650d3f965d8f8ed28a7f45b96d4ebdd"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gac650d3f965d8f8ed28a7f45b96d4ebdd">Kd</a> = 0.00005</td></tr>
<tr class="memdesc:gac650d3f965d8f8ed28a7f45b96d4ebdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">PID Derivative gain constant for speed control.  <br /></td></tr>
<tr class="separator:gac650d3f965d8f8ed28a7f45b96d4ebdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2e439ca68b7b6892379372a7d64e17c0" id="r_ga2e439ca68b7b6892379372a7d64e17c0"><td class="memItemLeft" align="right" valign="top">TaskHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga2e439ca68b7b6892379372a7d64e17c0">powerTaskHandle</a></td></tr>
<tr class="memdesc:ga2e439ca68b7b6892379372a7d64e17c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task handle for power monitoring task.  <br /></td></tr>
<tr class="separator:ga2e439ca68b7b6892379372a7d64e17c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72add6b773bcdff7c2627fb57e0e318e" id="r_ga72add6b773bcdff7c2627fb57e0e318e"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga72add6b773bcdff7c2627fb57e0e318e">filtered_ch0</a></td></tr>
<tr class="memdesc:ga72add6b773bcdff7c2627fb57e0e318e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filtered ADC value for current sensor channel 0.  <br /></td></tr>
<tr class="separator:ga72add6b773bcdff7c2627fb57e0e318e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaee70e8b430f0700c220c36645ab3d9d2" id="r_gaee70e8b430f0700c220c36645ab3d9d2"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gaee70e8b430f0700c220c36645ab3d9d2">filtered_ch4</a></td></tr>
<tr class="memdesc:gaee70e8b430f0700c220c36645ab3d9d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filtered ADC value for current sensor channel 4.  <br /></td></tr>
<tr class="separator:gaee70e8b430f0700c220c36645ab3d9d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa210b2858db4e72330bbae1e1d083a7d" id="r_gaa210b2858db4e72330bbae1e1d083a7d"><td class="memItemLeft" align="right" valign="top">SemaphoreHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gaa210b2858db4e72330bbae1e1d083a7d">hallEffectFlag</a></td></tr>
<tr class="memdesc:gaa210b2858db4e72330bbae1e1d083a7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Semaphore signaled by Hall effect sensor interrupts.  <br /></td></tr>
<tr class="separator:gaa210b2858db4e72330bbae1e1d083a7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga89d98e267476d74d3dea65f84ddd830a" id="r_ga89d98e267476d74d3dea65f84ddd830a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga89d98e267476d74d3dea65f84ddd830a">direction</a></td></tr>
<tr class="memdesc:ga89d98e267476d74d3dea65f84ddd830a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Motor direction flag (deprecated - causes stalling)  <br /></td></tr>
<tr class="separator:ga89d98e267476d74d3dea65f84ddd830a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga83992b55088fe8e82bb7b59cd450305f" id="r_ga83992b55088fe8e82bb7b59cd450305f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga83992b55088fe8e82bb7b59cd450305f">motorState</a></td></tr>
<tr class="memdesc:ga83992b55088fe8e82bb7b59cd450305f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Motor enable state (1=on, 0=off)  <br /></td></tr>
<tr class="separator:ga83992b55088fe8e82bb7b59cd450305f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga73c569eb51dc41fde02995b7e9a4de2e" id="r_ga73c569eb51dc41fde02995b7e9a4de2e"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga73c569eb51dc41fde02995b7e9a4de2e">currentRPM</a> = 0</td></tr>
<tr class="memdesc:ga73c569eb51dc41fde02995b7e9a4de2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current RPM of the motor.  <br /></td></tr>
<tr class="separator:ga73c569eb51dc41fde02995b7e9a4de2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga600c66f48ad4125bb1b9ac198f42ea5f" id="r_ga600c66f48ad4125bb1b9ac198f42ea5f"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga600c66f48ad4125bb1b9ac198f42ea5f">currentOutput</a> = 0</td></tr>
<tr class="separator:ga600c66f48ad4125bb1b9ac198f42ea5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9b055c090b25e7c8b478ebca0ab9e69d" id="r_ga9b055c090b25e7c8b478ebca0ab9e69d"><td class="memItemLeft" align="right" valign="top">SemaphoreHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga9b055c090b25e7c8b478ebca0ab9e69d">estopMutex</a></td></tr>
<tr class="memdesc:ga9b055c090b25e7c8b478ebca0ab9e69d"><td class="mdescLeft">&#160;</td><td class="mdescRight">motorMulex for Current RPM and output  <br /></td></tr>
<tr class="separator:ga9b055c090b25e7c8b478ebca0ab9e69d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga829e788bfb9af8ac8e1a66edb6563269" id="r_ga829e788bfb9af8ac8e1a66edb6563269"><td class="memItemLeft" align="right" valign="top">volatile double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga829e788bfb9af8ac8e1a66edb6563269">setRPM</a></td></tr>
<tr class="memdesc:ga829e788bfb9af8ac8e1a66edb6563269"><td class="mdescLeft">&#160;</td><td class="mdescRight">Target RPM setpoint for speed controller.  <br /></td></tr>
<tr class="separator:ga829e788bfb9af8ac8e1a66edb6563269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaae451c935d6f5fbddc61a34be4fddb55" id="r_gaae451c935d6f5fbddc61a34be4fddb55"><td class="memItemLeft" align="right" valign="top">volatile double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gaae451c935d6f5fbddc61a34be4fddb55">softSetRPM</a></td></tr>
<tr class="memdesc:gaae451c935d6f5fbddc61a34be4fddb55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current soft RPM value (ramped setpoint)  <br /></td></tr>
<tr class="separator:gaae451c935d6f5fbddc61a34be4fddb55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b9466d080199239d19192d3257e6f83" id="r_ga1b9466d080199239d19192d3257e6f83"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga1b9466d080199239d19192d3257e6f83">estop</a> = 0</td></tr>
<tr class="memdesc:ga1b9466d080199239d19192d3257e6f83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emergency stop flag.  <br /></td></tr>
<tr class="separator:ga1b9466d080199239d19192d3257e6f83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga99178960b78fe351d37f5d6b4d4ff4b2" id="r_ga99178960b78fe351d37f5d6b4d4ff4b2"><td class="memItemLeft" align="right" valign="top">sharedValues&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga99178960b78fe351d37f5d6b4d4ff4b2">maxCurrentLimit</a></td></tr>
<tr class="memdesc:ga99178960b78fe351d37f5d6b4d4ff4b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum current limit for motor.  <br /></td></tr>
<tr class="separator:ga99178960b78fe351d37f5d6b4d4ff4b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2de5b01a4efcb9b1582bb2947efc6bad" id="r_ga2de5b01a4efcb9b1582bb2947efc6bad"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga2de5b01a4efcb9b1582bb2947efc6bad">steps</a></td></tr>
<tr class="memdesc:ga2de5b01a4efcb9b1582bb2947efc6bad"><td class="mdescLeft">&#160;</td><td class="mdescRight">RPM ramping step size for acceleration.  <br /></td></tr>
<tr class="separator:ga2de5b01a4efcb9b1582bb2947efc6bad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf6653bd41447168ef760db988a4b6f3f" id="r_gaf6653bd41447168ef760db988a4b6f3f"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gaf6653bd41447168ef760db988a4b6f3f">esteps</a></td></tr>
<tr class="memdesc:gaf6653bd41447168ef760db988a4b6f3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">RPM ramping step size for emergency stop deceleration.  <br /></td></tr>
<tr class="separator:gaf6653bd41447168ef760db988a4b6f3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf8719d85f3c68c832744bae03df7d2b4" id="r_gaf8719d85f3c68c832744bae03df7d2b4"><td class="memItemLeft" align="right" valign="top">sharedValues&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gaf8719d85f3c68c832744bae03df7d2b4">rpmData</a></td></tr>
<tr class="memdesc:gaf8719d85f3c68c832744bae03df7d2b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shared RPM values.  <br /></td></tr>
<tr class="separator:gaf8719d85f3c68c832744bae03df7d2b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17cac9283a9453945976134b5535deb0" id="r_ga17cac9283a9453945976134b5535deb0"><td class="memItemLeft" align="right" valign="top">sharedValues&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga17cac9283a9453945976134b5535deb0">powerData</a></td></tr>
<tr class="memdesc:ga17cac9283a9453945976134b5535deb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shared Power Values.  <br /></td></tr>
<tr class="separator:ga17cac9283a9453945976134b5535deb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb472f4b53a5c0712e857739df6e61f5" id="r_gadb472f4b53a5c0712e857739df6e61f5"><td class="memItemLeft" align="right" valign="top">sharedValues&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gadb472f4b53a5c0712e857739df6e61f5">pwmData</a></td></tr>
<tr class="memdesc:gadb472f4b53a5c0712e857739df6e61f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shared PWM value.  <br /></td></tr>
<tr class="separator:gadb472f4b53a5c0712e857739df6e61f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5532ce73a7b684972ba38c612509c340" id="r_ga5532ce73a7b684972ba38c612509c340"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#ga5532ce73a7b684972ba38c612509c340">hallEffectState</a></td></tr>
<tr class="memdesc:ga5532ce73a7b684972ba38c612509c340"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current Hall effect sensor state (3-bit combination)  <br /></td></tr>
<tr class="separator:ga5532ce73a7b684972ba38c612509c340"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd84449e787329bb9988de0695dbed64" id="r_gacd84449e787329bb9988de0695dbed64"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__motor.html#gacd84449e787329bb9988de0695dbed64">hallEffect_Count</a></td></tr>
<tr class="memdesc:gacd84449e787329bb9988de0695dbed64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter for Hall effect sensor transitions (for RPM calculation)  <br /></td></tr>
<tr class="separator:gacd84449e787329bb9988de0695dbed64"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="motors_8c.html">motors.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
